<?xml version='1.1' encoding='UTF-8'?>
<xwikidoc version="1.3" reference="XWiki.Notifications.Code.NotificationsMacro" locale="">
  <web>XWiki.Notifications.Code</web>
  <name>NotificationsMacro</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>XWiki.SvenHoyer</creator>
  <creationDate>1523956287000</creationDate>
  <versions>head	3.1;
access;
symbols;
locks; strict;
comment	@# @;


3.1
date	2018.09.17.10.41.16;	author XWiki_2ESvenHoyer;	state full;
branches;
next	2.1;

2.1
date	2018.09.17.10.03.30;	author XWiki_2ESvenHoyer;	state diff;
branches;
next	1.1;

1.1
date	2018.08.16.06.57.17;	author XWiki_2ESvenHoyer;	state diff;
branches;
next	;


desc
@@


3.1
log
@Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/9.11.7]
@
text
@&lt;?xml version='1.1' encoding='UTF-8'?>
&lt;xwikidoc version="1.3" reference="XWiki.Notifications.Code.NotificationsMacro" locale="">
  &lt;web>XWiki.Notifications.Code&lt;/web>
  &lt;name>NotificationsMacro&lt;/name>
  &lt;language/>
  &lt;defaultLanguage/>
  &lt;translation>0&lt;/translation>
  &lt;creator>XWiki.SvenHoyer&lt;/creator>
  &lt;creationDate>1523956287000&lt;/creationDate>
  &lt;parent>XWiki.Notifications.Code.WebHome&lt;/parent>
  &lt;author>XWiki.SvenHoyer&lt;/author>
  &lt;contentAuthor>XWiki.SvenHoyer&lt;/contentAuthor>
  &lt;date>1537180876000&lt;/date>
  &lt;contentUpdateDate>1534402637000&lt;/contentUpdateDate>
  &lt;version>3.1&lt;/version>
  &lt;title/>
  &lt;comment>Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/9.11.7]&lt;/comment>
  &lt;minorEdit>false&lt;/minorEdit>
  &lt;syntaxId>xwiki/2.1&lt;/syntaxId>
  &lt;hidden>true&lt;/hidden>
  &lt;content/>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>0&lt;/number>
    &lt;className>XWiki.JavaScriptExtension&lt;/className>
    &lt;guid>6e85d009-1444-4eac-ad84-67f06d136c73&lt;/guid>
    &lt;class>
      &lt;name>XWiki.JavaScriptExtension&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;cache>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>cache&lt;/name>
        &lt;number>5&lt;/number>
        &lt;prettyName>Caching policy&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>long|short|default|forbid&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/cache>
      &lt;code>
        &lt;contenttype>PureText&lt;/contenttype>
        &lt;disabled>0&lt;/disabled>
        &lt;editor>PureText&lt;/editor>
        &lt;name>code&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Code&lt;/prettyName>
        &lt;rows>20&lt;/rows>
        &lt;size>50&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/code>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
      &lt;parse>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>parse&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parse content&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/parse>
      &lt;use>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>use&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Use this extension&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>currentPage|onDemand|always&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/use>
    &lt;/class>
    &lt;property>
      &lt;cache>long&lt;/cache>
    &lt;/property>
    &lt;property>
      &lt;code>'use strict';
require(['jquery', 'XWikiNotificationsMacro'], function ($, XWikiNotificationsMacro) {
  $(document).ready(function() {
    $('.notifications-macro').each(function () {
      var macro = new XWikiNotificationsMacro(this);
      macro.load();
    });
  });
});
&lt;/code>
    &lt;/property>
    &lt;property>
      &lt;name>JS&lt;/name>
    &lt;/property>
    &lt;property>
      &lt;parse>1&lt;/parse>
    &lt;/property>
    &lt;property>
      &lt;use>currentPage&lt;/use>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>1&lt;/number>
    &lt;className>XWiki.JavaScriptExtension&lt;/className>
    &lt;guid>815d35ce-0a68-4e78-a9f5-354b3c9c394b&lt;/guid>
    &lt;class>
      &lt;name>XWiki.JavaScriptExtension&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;cache>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>cache&lt;/name>
        &lt;number>5&lt;/number>
        &lt;prettyName>Caching policy&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>long|short|default|forbid&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/cache>
      &lt;code>
        &lt;contenttype>PureText&lt;/contenttype>
        &lt;disabled>0&lt;/disabled>
        &lt;editor>PureText&lt;/editor>
        &lt;name>code&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Code&lt;/prettyName>
        &lt;rows>20&lt;/rows>
        &lt;size>50&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/code>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
      &lt;parse>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>parse&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parse content&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/parse>
      &lt;use>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>use&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Use this extension&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>currentPage|onDemand|always&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/use>
    &lt;/class>
    &lt;property>
      &lt;cache>long&lt;/cache>
    &lt;/property>
    &lt;property>
      &lt;code>define('XWikiNotificationsMacro', ['jquery', 'xwiki-meta'], function($, xm) {
  /**
   * Construct a XWikiNotificationsMacro.
   *
   * Except the first ine, all the parameters are optional in the constructor. If they are not provided, the macro will
   * load them from the DOM element, where they should be present with the "data-" attributes.
   *
   * @@param macro DOM element that will be uses as container for the notifications.
   * @@param userId (optional) full serialization of the current user for who we are loading the notifications-macro
   * @@param count (optional) maximum number of notifications to load for each batch
   * @@param displayReadStatus (optional) either or not to display if the notifications have been read or notifications
   * @@param blackList (optional) the list of the ids of events that have already been displayed and that we don't want
       to get again in next batches.
   * @@param useUserPreferences (optional) either or not to use the preferences of the user instead of handling the
   *   following parameters
   * @@param displayOwnEvents (optional) either or not to display the events of the current user
   * @@param displayMinorEvents (optional) either or not to display minor update events on documents
   * @@param displaySystemEvents (optional) either or not to display events triggered by the system
   * @@param displayReadEvents (optional) either or not to display events that have been marked as read by the user
   * @@param wikis (optional) list of wikis, comma-separated, to include in the notifications
   * @@param spaces (optional) list of spaces, comma-separated, to include in the notifications
   * @@param pages (optional) list of pages, comma-separated, to include in the notifications
   * @@param users (optional) list of users, comma-separated, to include in the notifications (and only them)
   */
  return function(macro, userId, count, displayReadStatus, blackList, useUserPreferences,
      displayOwnEvents, displayMinorEvents, displaySystemEvents, displayReadEvents, wikis, spaces, pages, users) {
    var self = this;
    self.macro = $(macro);
    self.userId = userId ? userId : self.macro.attr('data-userId');
    self.notificationsLimit = count ? count : self.macro.attr('data-count');
    self.displayReadStatus = displayReadStatus != undefined
      ? displayReadStatus : self.macro.attr('data-displayReadStatus').toLowerCase() == 'true' &amp;amp;&amp;amp; self.userId != '';
    self.blackList = blackList ? blackList : [];
    self.useUserPreferences = useUserPreferences != undefined
      ? useUserPreferences : self.macro.attr('data-useuserpreferences');
    self.displayOwnEvents = displayOwnEvents != undefined ? displayOwnEvents : self.macro.attr('data-displayOwnEvents');
    self.displayMinorEvents = displayMinorEvents != undefined ? displayMinorEvents
      : self.macro.attr('data-displayMinorEvents');
    self.displaySystemEvents = displaySystemEvents != undefined ? displaySystemEvents
      : self.macro.attr('data-displaySystemEvents');
    self.displayReadEvents = displayReadEvents != undefined ? displayReadEvents
      : self.macro.attr('data-displayReadEvents');
    self.wikis = wikis != undefined ? wikis : self.macro.attr('data-wikis');
    self.spaces = spaces != undefined ? spaces : self.macro.attr('data-spaces');
    self.pages = pages != undefined ? pages : self.macro.attr('data-pages');
    self.users = users != undefined ? users : self.macro.attr('data-users');

    /**
     * Function that load notifications.
     *
     * The parameter `untilDate` is used as an "offset" to get events in a paginate mode.
     * We cannot rely on an integer offset because new events could have been stored recently and we want to display
     * older ones only.
     */
    self.load = function(untilDate) {
      var params = {
        'userId':              self.userId,
        'useUserPreferences':  self.useUserPreferences,
        'count':               self.notificationsLimit,
        'displayOwnEvents':    self.displayOwnEvents,
        'displayMinorEvents':  self.displayMinorEvents,
        'displaySystemEvents': self.displaySystemEvents,
        'displayReadEvents':   self.displayReadEvents,
        'wikis':               self.wikis,
        'spaces':              self.spaces,
        'pages':               self.pages,
        'users':               self.users,
        'displayReadStatus':   self.displayReadStatus
      };
      if (untilDate) {
        params.untilDate = untilDate;
        params.blackList = self.blackList.join(',');
      }
      var promise = $.Deferred();
      var restURL = xm.restURL.substring(0, xm.restURL.indexOf('/rest/')) + '/rest/notifications?media=json';
      $.getJSON(restURL, params).done(function (data) {
        // Remove loading items
        self.macro.removeClass('loading');
        // Display the "nothing!" message if there is no notification
        if (data.notifications.length == 0 &amp;amp;&amp;amp; !untilDate) {
          self.displayNoNotification();
        }
        // Display each entry
        for (var i = 0; i &amp;lt; data.notifications.length; ++i) {
          self.displayEntry(data.notifications[i]);
        }
        self.macro.find('.notifications-macro-load-more').remove();
        // If there is other notifications to load
        if (data.notifications.length == self.notificationsLimit) {
          var loadMore = $('&amp;lt;div>').addClass('text-center').addClass('notifications-macro-load-more');
          var btn = $('&amp;lt;button>');
          btn.text("$escapetool.javascript($services.localization.render('notifications.menu.more'))");
          btn.addClass('btn').addClass('btn-default').addClass('btn-block');
          loadMore.append(btn);
          self.macro.append(loadMore);
          btn.click(function(event) {
            loadMore.text('').addClass('loading').css('height', '50px');
            // We use the date of the last displayed event as an offset to display those that come next
            var lastCompositeEvent = data.notifications[data.notifications.length - 1];
            var lastEventDate = lastCompositeEvent.dates[lastCompositeEvent.dates.length - 1];
            self.load(lastEventDate);
          });
        }
        promise.resolve(data.notifications);
      });
      return promise;
    };

    /**
     * Display a notification entry
     */
    self.displayEntry = function (entry) {
      // Add the id of the entry to the blacklist
      for (var i = 0; i &amp;lt; entry.ids.length; ++i) {
        self.blackList.push(entry.ids[i]);
      }
      // Create the container
      var notif = $('&amp;lt;div>').addClass('notification-event');
      notif.attr('data-eventtype', entry.type);
      // Put the content
      notif.append(entry.html);
      // Create the "read" button
      var readButton = $('&amp;lt;button>');
      if (!entry.read &amp;amp;&amp;amp; self.displayReadStatus) {
        notif.addClass('notification-event-unread');
        // Add the "mark as read" button
        notif.find('.notification-content').prepend(readButton);
      }
      if (entry.exception) {
        var exceptionBox = $('&amp;lt;div>').addClass('box errormessage');
        exceptionBox.text(entry.exception);
        notif.append(exceptionBox);
      }
      // Store the data in the DOM element so that any javascript code can retrieve it
      notif.data('notif', entry);
      // Add the notification entry
      self.macro.append(notif);
      // Add the "mark as read" button if the notif is not already read
      if (!entry.read) {
        // Style the read button
        readButton.addClass('notification-event-read-button').addClass('btn btn-xs');
        // Insert the cross icon
        readButton.html('$services.icon.renderHTML("check")');
        // On click
        readButton.click(function() {
          var notif = $(this).parents('div.notification-event');
          notif.removeClass('notification-event-unread');
          var url = new XWiki.Document(XWiki.Model.resolve('XWiki.Notifications.Code.NotificationsDisplayerUIX',
            XWiki.EntityType.DOCUMENT)).getURL('get', 'outputSyntax=plain');
          $.post(url, {
            action: 'read',
            eventIds: notif.data('notif').ids.join(','),
            read: true
          });
          $(this).remove();
          self.macro.trigger('eventMarkedAsRead', notif);
        });
      }
      // Details
      var details = notif.find('.notification-event-details');
      details.hide();
      var arrow = notif.find('.notification-event-arrow');
      notif.find('.toggle-notification-event-details').click(function() {
        details.toggle();
        arrow.text(arrow.text() == '▸' ? '▾' : '▸');
      });
    };

    /**
     * Display a message saying there is no content
     */
    self.displayNoNotification = function () {
      self.macro.removeClass('loading').html($('&amp;lt;p>').addClass('text-center noitems')
        .text("$escapetool.javascript($services.localization.render('notifications.menu.nothing'))"));
    };
  };
});
&lt;/code>
    &lt;/property>
    &lt;property>
      &lt;name>Macro class&lt;/name>
    &lt;/property>
    &lt;property>
      &lt;parse>1&lt;/parse>
    &lt;/property>
    &lt;property>
      &lt;use>currentPage&lt;/use>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>0&lt;/number>
    &lt;className>XWiki.StyleSheetExtension&lt;/className>
    &lt;guid>4e1c9bc0-9e28-41ed-b8f5-bd27e9cb740a&lt;/guid>
    &lt;class>
      &lt;name>XWiki.StyleSheetExtension&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;cache>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>cache&lt;/name>
        &lt;number>5&lt;/number>
        &lt;prettyName>Caching policy&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>long|short|default|forbid&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/cache>
      &lt;code>
        &lt;contenttype>PureText&lt;/contenttype>
        &lt;disabled>0&lt;/disabled>
        &lt;editor>PureText&lt;/editor>
        &lt;name>code&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Code&lt;/prettyName>
        &lt;rows>20&lt;/rows>
        &lt;size>50&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/code>
      &lt;contentType>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name&gt;contentType&lt;/name>
        &lt;number>6&lt;/number>
        &lt;prettyName>Content Type&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>CSS|LESS&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/contentType>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
      &lt;parse>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>parse&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parse content&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/parse>
      &lt;use>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>use&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Use this extension&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator> &lt;/separator>
        &lt;separators>|, &lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>currentPage|onDemand|always&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/use>
    &lt;/class>
    &lt;property>
      &lt;cache>long&lt;/cache>
    &lt;/property>
    &lt;property>
      &lt;code>#template('colorThemeInit.vm')
/***********************************************
 * Notification Container
 ***********************************************/
.notifications-macro {
  float: left;
  max-width: 500px;
  min-height: 50px;
  width: 100%;
}

/***********************************************
 * Notification Event
 ***********************************************/
.notification-event {
  border: 1px dashed $theme.borderColor;
  padding: 1em;
}

.notification-event-unread {
  background-color: $theme.panelBackgroundColor;
}

/***********************************************
 * Notification Icons
 ***********************************************/
.notification-icon {
  padding-right: 0;
  position: relative;
}

.notification-icon .img-thumbnail {
  background-color: $theme.pageContentBackgroundColor;
  font-size: 2em;
  height: 2em;
  text-align: center;
  width: 2em;
}

.notification-icon .img-thumbnail.small{
  font-size: 1em;
  height: 2em;
  left: 0.5em;
  padding: 0.1em;
  position: absolute;
  bottom: -0.8em;
  width: 2em;
}

/***********************************************
 * Notification Content
 ***********************************************/
.notification-content {
  padding: 0 2.6em 0 0.5em;
}

.notification-content blockquote {
  font-size: 1.0em;
  margin-bottom: 0.5em;
  padding: 0 0.8em;
}

.notification-event-user > img {
  height: 16px;
  width: 16px;
  /* Don't work for Internet Explorer nor Edge 15 */
  object-fit: cover;
  object-position: center;
}

/***********************************************
 * Notification Buttons
 ***********************************************/
.notification-event-read-button, .toggle-notification-event-details {
  background-color: $theme.pageContentBackgroundColor;
  border: 1px solid #ddd;
  position: absolute;
  right: 10px;
  width: 2em;
  z-index: 1;
}

.notification-event-read-button {
  top: -6px;
}

.toggle-notification-event-details {
  bottom: -6px;
}

/***********************************************
 * Notification Details
 ***********************************************/
.notification-event-details {
  font-size: 0.8em;
  margin: 1em 0 0 0;
}

.notification-event-details td {
  border: 0;
  overflow: hidden;
  padding: 2px;
  text-overflow: ellipsis;
  width: 33%;
}

.notification-event-details td.description {
  width: 45%;
}

/***********************************************
 * Notifications Footer
 ***********************************************/
.notifications-load-more {
  cursor: pointer;
  min-height: 2em;
}

.notifications-load-more:hover {
  background-color: $theme.highlightColor;
}

.notifications-load-more p {
  margin: 0;
  padding: 0.7em;
}&lt;/code>
    &lt;/property>
    &lt;property>
      &lt;contentType>CSS&lt;/contentType>
    &lt;/property>
    &lt;property>
      &lt;name>CSS&lt;/name>
    &lt;/property>
    &lt;property>
      &lt;parse>1&lt;/parse>
    &lt;/property>
    &lt;property>
      &lt;use>currentPage&lt;/use>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>0&lt;/number>
    &lt;className>XWiki.WikiMacroClass&lt;/className>
    &lt;guid>74143203-3a6b-44fd-8267-05163e7ed1fa&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;code>
        &lt;disabled>0&lt;/disabled>
        &lt;editor>Text&lt;/editor>
        &lt;name>code&lt;/name>
        &lt;number>9&lt;/number>
        &lt;prettyName>Macro code&lt;/prettyName>
        &lt;rows>20&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/code>
      &lt;contentDescription>
        &lt;contenttype>PureText&lt;/contenttype>
        &lt;disabled>0&lt;/disabled>
        &lt;editor>PureText&lt;/editor>
        &lt;name>contentDescription&lt;/name>
        &lt;number>8&lt;/number>
        &lt;prettyName>Content description (Not applicable for "No content" type)&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/contentDescription>
      &lt;contentType>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>contentType&lt;/name>
        &lt;number>7&lt;/number>
        &lt;prettyName>Macro content type&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator>|&lt;/separator>
        &lt;separators>|&lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>Optional|Mandatory|No content&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/contentType>
      &lt;defaultCategory>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultCategory&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Default category&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultCategory>
      &lt;description>
        &lt;contenttype>PureText&lt;/contenttype>
        &lt;disabled>0&lt;/disabled>
        &lt;editor>PureText&lt;/editor>
        &lt;name>description&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Macro description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;id>
        &lt;disabled>0&lt;/disabled>
        &lt;name>id&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Macro id&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/id>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Macro name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
      &lt;supportsInlineMode>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>supportsInlineMode&lt;/name>
        &lt;number>5&lt;/number>
        &lt;prettyName>Supports inline mode&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/supportsInlineMode>
      &lt;visibility>
        &lt;cache>0&lt;/cache>
        &lt;disabled>0&lt;/disabled>
        &lt;displayType>select&lt;/displayType>
        &lt;multiSelect>0&lt;/multiSelect>
        &lt;name>visibility&lt;/name>
        &lt;number>6&lt;/number>
        &lt;prettyName>Macro visibility&lt;/prettyName>
        &lt;relationalStorage>0&lt;/relationalStorage>
        &lt;separator>|&lt;/separator>
        &lt;separators>|&lt;/separators>
        &lt;size>1&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;values>Current User|Current Wiki|Global&lt;/values>
        &lt;classType>com.xpn.xwiki.objects.classes.StaticListClass&lt;/classType>
      &lt;/visibility>
    &lt;/class>
    &lt;property>
      &lt;code>{{velocity}}
#set ($displayMacro = true)
#if ($xcontext.action != 'view')
  {{info}}
    {{translation key="notifications.macro.whenNotView" /}}
  {{/info}}
  
  #set ($displayMacro = false)
#else 
  #set ($users = $xcontext.macro.params.users)
  #if ("$!xcontext.macro.params.displayWatchedUsersOnly" == 'true')
    #set ($watchedUsers = $services.notification.watch.watchedUsers)
    #if ($watchedUsers.isEmpty())
    
      {{warning}}
        {{translation key="notifications.macro.noWatchedUsers" /}}
      {{/warning}}
      
      #set ($displayMacro = false)
    #else
      #set ($users = $stringtool.join($services.notification.watch.watchedUsers, ','))
    #end
  #end
#end
#if ($displayMacro)
#set ($discard = $xwiki.jsx.use('XWiki.Notifications.Code.NotificationsMacro'))
#set ($discard = $xwiki.ssx.use('XWiki.Notifications.Code.NotificationsMacro'))
#set ($discard = $xwiki.ssx.use('XWiki.Notifications.Code.NotificationsDisplayerUIX'))
{{html clean="false"}}
&amp;lt;div class="notifications-macro loading" 
  data-userId="$!escapetool.xml($services.model.serialize($xcontext.userReference, 'default'))"
  data-count="$!escapetool.xml($xcontext.macro.params.count)" 
  data-useUserPreferences="$!escapetool.xml($xcontext.macro.params.useUserPreferences)"
  data-displayOwnEvents="$!escapetool.xml($xcontext.macro.params.displayOwnEvents)"
  data-displayMinorEvents="$!escapetool.xml($xcontext.macro.params.displayMinorEvents)"
  data-displaySystemEvents="$!escapetool.xml($xcontext.macro.params.displaySystemEvents)"
  data-displayReadEvents="$!escapetool.xml($xcontext.macro.params.displayReadEvents)"
  data-wikis="$!escapetool.xml($xcontext.macro.params.wikis)"
  data-spaces="$!escapetool.xml($xcontext.macro.params.spaces)"
  data-pages="$!escapetool.xml($xcontext.macro.params.pages)"
  data-users="$!escapetool.xml($users)"
  data-displayReadStatus="$!escapetool.xml($xcontext.macro.params.displayReadStatus)"
>
&amp;lt;/div>
{{/html}}
#end
{{/velocity}}&lt;/code>
    &lt;/property>
    &lt;property>
      &lt;contentDescription>&lt;/contentDescription>
    &lt;/property>
    &lt;property>
      &lt;contentType>No content&lt;/contentType>
    &lt;/property>
    &lt;property>
      &lt;defaultCategory>&lt;/defaultCategory>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;id>notifications&lt;/id>
    &lt;/property>
    &lt;property>
      &lt;name>Notifications&lt;/name>
    &lt;/property>
    &lt;property>
      &lt;supportsInlineMode>0&lt;/supportsInlineMode>
    &lt;/property>
    &lt;property>
      &lt;visibility>Current Wiki&lt;/visibility>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>0&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>05ae5000-9fb6-4950-91b1-0ca199dc6c2f&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>10&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>count&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>2&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>f978d0e3-e4e3-434a-aca2-931c037ed5ab&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>false&lt;/defaultValue&gt;
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>useUserPreferences&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>3&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>d7f3ec6d-47cc-4ac9-9dfa-79af7d7a130a&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/&gt;
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>false&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displayOwnEvents&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>4&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>be57dad1-cbbd-438c-83c7-a7c76df0f817&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>false&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displayMinorEvents&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>5&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>a779f085-8472-4ae1-950c-3e6d74690a2b&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>false&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displaySystemEvents&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>6&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>cf8576f4-e7da-481a-944e-087aa16125ac&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>true&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displayReadEvents&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>7&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>9bb41e1e-1a94-46ea-baa5-a47e8d685155&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>true&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displayReadStatus&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>8&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>9c9f159d-c46d-488b-adf7-13902d1f0bf7&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>wikis&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>9&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>b2b2ba6c-9c50-4678-bd78-8d90937c148d&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable&gt;
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>spaces&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>10&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>b2fec19e-2ab6-4c80-9d65-e771f0649560&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>pages&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>11&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>64a5c9be-27c7-4ca8-b3f1-e944526a308b&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>users&lt;/name>
    &lt;/property>
  &lt;/object>
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>12&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>981511b5-e10d-4691-a81a-849b35ad191f&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>false&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displayWatchedUsersOnly&lt;/name>
    &lt;/property>
  &lt;/object>
&lt;/xwikidoc>@


2.1
log
@Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/10.7]
@
text
@d13 1
a13 1
  &lt;date>1537178610000&lt;/date>
d15 1
a15 1
  &lt;version>2.1&lt;/version>
d17 1
a17 1
  &lt;comment>Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/10.7]&lt;/comment>
d282 1
a282 1
      $.ajax(restURL, {cache: false, data: params}).done(function (data) {
d301 1
a301 1
          self.insertElementInMacroContainer(loadMore);
a313 12
    
    /**
     * Add the given DOM element into the macro container (could be before the RSS link if there is one).
     */
    self.insertElementInMacroContainer = function (domToInsert) {
      var rssLink = self.macro.find('.notifications-macro-rss-link');
      if (rssLink.length > 0) {
        domToInsert.insertBefore(rssLink);
      } else {
        self.macro.append(domToInsert);
      }
    };
d343 1
a343 1
      self.insertElementInMacroContainer(notif);
a504 4
.notifications-macro-rss-link {
  text-align: right;
}

a796 18
#if ('true' == $xcontext.macro.params.displayRSSLink)
  ## Generate the RSS URL to display the same notifications but in the RSS format
  #set ($rssURL = $services.rest.url($doc.documentReference))
  #set ($rssURL = "${rssURL.substring(0, $rssURL.indexOf('/rest'))}/rest/notifications/rss")
  #set ($rssURL = "${rssURL}?userId=$!escapetool.url($services.model.serialize($xcontext.userReference, 'default'))")
  #set ($rssURL = "${rssURL}&amp;amp;useUserPreferences=$!escapetool.url($xcontext.macro.params.useUserPreferences)")
  #set ($rssURL = "${rssURL}&amp;amp;count=$!escapetool.url($xcontext.macro.params.count)")
  #set ($rssURL = "${rssURL}&amp;amp;displayOwnEvents=$!escapetool.url($xcontext.macro.params.displayOwnEvents)")
  #set ($rssURL = "${rssURL}&amp;amp;displayMinorEvents=$!escapetool.url($xcontext.macro.params.displayMinorEvents)")
  #set ($rssURL = "${rssURL}&amp;amp;displaySystemEvents=$!escapetool.url($xcontext.macro.params.displaySystemEvents)")
  #set ($rssURL = "${rssURL}&amp;amp;displayReadEvents=$!escapetool.url($xcontext.macro.params.displayReadEvents)")
  #set ($rssURL = "${rssURL}&amp;amp;wikis=$!escapetool.url($xcontext.macro.params.wikis)")
  #set ($rssURL = "${rssURL}&amp;amp;spaces=$!escapetool.url($xcontext.macro.params.spaces)")
  #set ($rssURL = "${rssURL}&amp;amp;pages=$!escapetool.url($xcontext.macro.params.pages)")
  #set ($rssURL = "${rssURL}&amp;amp;users=$!escapetool.url($xcontext.macro.params.users)")
  #set ($rssURL = "${rssURL}&amp;amp;displayReadStatus=$!escapetool.url($xcontext.macro.params.displayReadStatus)")
  &amp;lt;p class="notifications-macro-rss-link">&amp;lt;a href="$rssURL" target="_blank">$services.icon.renderHTML('rss') $escapetool.xml($services.localization.render('notifications.rss.feedLink'))&amp;lt;/a>&amp;lt;/p>
#end
a1618 66
  &lt;object>
    &lt;name>XWiki.Notifications.Code.NotificationsMacro&lt;/name>
    &lt;number>13&lt;/number>
    &lt;className>XWiki.WikiMacroParameterClass&lt;/className>
    &lt;guid>2dfca976-0354-4fe4-9813-10161ecc09a7&lt;/guid>
    &lt;class>
      &lt;name>XWiki.WikiMacroParameterClass&lt;/name>
      &lt;customClass/>
      &lt;customMapping/>
      &lt;defaultViewSheet/>
      &lt;defaultEditSheet/>
      &lt;defaultWeb/>
      &lt;nameField/>
      &lt;validationScript/>
      &lt;defaultValue>
        &lt;disabled>0&lt;/disabled>
        &lt;name>defaultValue&lt;/name>
        &lt;number>4&lt;/number>
        &lt;prettyName>Parameter default value&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/defaultValue>
      &lt;description>
        &lt;disabled>0&lt;/disabled>
        &lt;name>description&lt;/name>
        &lt;number>2&lt;/number>
        &lt;prettyName>Parameter description&lt;/prettyName>
        &lt;rows>5&lt;/rows>
        &lt;size>40&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.TextAreaClass&lt;/classType>
      &lt;/description>
      &lt;mandatory>
        &lt;disabled>0&lt;/disabled>
        &lt;displayFormType>select&lt;/displayFormType>
        &lt;displayType>yesno&lt;/displayType>
        &lt;name>mandatory&lt;/name>
        &lt;number>3&lt;/number>
        &lt;prettyName>Parameter mandatory&lt;/prettyName>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.BooleanClass&lt;/classType>
      &lt;/mandatory>
      &lt;name>
        &lt;disabled>0&lt;/disabled>
        &lt;name>name&lt;/name>
        &lt;number>1&lt;/number>
        &lt;prettyName>Parameter name&lt;/prettyName>
        &lt;size>30&lt;/size>
        &lt;unmodifiable>0&lt;/unmodifiable>
        &lt;classType>com.xpn.xwiki.objects.classes.StringClass&lt;/classType>
      &lt;/name>
    &lt;/class>
    &lt;property>
      &lt;defaultValue>true&lt;/defaultValue>
    &lt;/property>
    &lt;property>
      &lt;description>&lt;/description>
    &lt;/property>
    &lt;property>
      &lt;mandatory>0&lt;/mandatory>
    &lt;/property>
    &lt;property>
      &lt;name>displayRSSLink&lt;/name>
    &lt;/property>
  &lt;/object>
@


1.1
log
@Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/9.11.7]
@
text
@d13 1
a13 1
  &lt;date>1534402637000&lt;/date>
d15 1
a15 1
  &lt;version>1.1&lt;/version>
d17 1
a17 1
  &lt;comment>Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/9.11.7]&lt;/comment>
d282 1
a282 1
      $.getJSON(restURL, params).done(function (data) {
d301 1
a301 1
          self.macro.append(loadMore);
d314 12
d355 1
a355 1
      self.macro.append(notif);
d517 4
d813 18
d1653 66
@
</versions>
  <parent>XWiki.Notifications.Code.WebHome</parent>
  <author>XWiki.SvenHoyer</author>
  <contentAuthor>XWiki.SvenHoyer</contentAuthor>
  <date>1537180876000</date>
  <contentUpdateDate>1534402637000</contentUpdateDate>
  <version>3.1</version>
  <title/>
  <comment>Install extension [org.xwiki.platform:xwiki-platform-notifications-ui/9.11.7]</comment>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>true</hidden>
  <content/>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>0</number>
    <className>XWiki.JavaScriptExtension</className>
    <guid>6e85d009-1444-4eac-ad84-67f06d136c73</guid>
    <class>
      <name>XWiki.JavaScriptExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <defaultValue>long</defaultValue>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <contenttype>PureText</contenttype>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage|onDemand|always</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>'use strict';
require(['jquery', 'XWikiNotificationsMacro'], function ($, XWikiNotificationsMacro) {
  $(document).ready(function() {
    $('.notifications-macro').each(function () {
      var macro = new XWikiNotificationsMacro(this);
      macro.load();
    });
  });
});
</code>
    </property>
    <property>
      <name>JS</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>1</number>
    <className>XWiki.JavaScriptExtension</className>
    <guid>815d35ce-0a68-4e78-a9f5-354b3c9c394b</guid>
    <class>
      <name>XWiki.JavaScriptExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <defaultValue>long</defaultValue>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <contenttype>PureText</contenttype>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage|onDemand|always</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>define('XWikiNotificationsMacro', ['jquery', 'xwiki-meta'], function($, xm) {
  /**
   * Construct a XWikiNotificationsMacro.
   *
   * Except the first ine, all the parameters are optional in the constructor. If they are not provided, the macro will
   * load them from the DOM element, where they should be present with the "data-" attributes.
   *
   * @param macro DOM element that will be uses as container for the notifications.
   * @param userId (optional) full serialization of the current user for who we are loading the notifications-macro
   * @param count (optional) maximum number of notifications to load for each batch
   * @param displayReadStatus (optional) either or not to display if the notifications have been read or notifications
   * @param blackList (optional) the list of the ids of events that have already been displayed and that we don't want
       to get again in next batches.
   * @param useUserPreferences (optional) either or not to use the preferences of the user instead of handling the
   *   following parameters
   * @param displayOwnEvents (optional) either or not to display the events of the current user
   * @param displayMinorEvents (optional) either or not to display minor update events on documents
   * @param displaySystemEvents (optional) either or not to display events triggered by the system
   * @param displayReadEvents (optional) either or not to display events that have been marked as read by the user
   * @param wikis (optional) list of wikis, comma-separated, to include in the notifications
   * @param spaces (optional) list of spaces, comma-separated, to include in the notifications
   * @param pages (optional) list of pages, comma-separated, to include in the notifications
   * @param users (optional) list of users, comma-separated, to include in the notifications (and only them)
   */
  return function(macro, userId, count, displayReadStatus, blackList, useUserPreferences,
      displayOwnEvents, displayMinorEvents, displaySystemEvents, displayReadEvents, wikis, spaces, pages, users) {
    var self = this;
    self.macro = $(macro);
    self.userId = userId ? userId : self.macro.attr('data-userId');
    self.notificationsLimit = count ? count : self.macro.attr('data-count');
    self.displayReadStatus = displayReadStatus != undefined
      ? displayReadStatus : self.macro.attr('data-displayReadStatus').toLowerCase() == 'true' &amp;&amp; self.userId != '';
    self.blackList = blackList ? blackList : [];
    self.useUserPreferences = useUserPreferences != undefined
      ? useUserPreferences : self.macro.attr('data-useuserpreferences');
    self.displayOwnEvents = displayOwnEvents != undefined ? displayOwnEvents : self.macro.attr('data-displayOwnEvents');
    self.displayMinorEvents = displayMinorEvents != undefined ? displayMinorEvents
      : self.macro.attr('data-displayMinorEvents');
    self.displaySystemEvents = displaySystemEvents != undefined ? displaySystemEvents
      : self.macro.attr('data-displaySystemEvents');
    self.displayReadEvents = displayReadEvents != undefined ? displayReadEvents
      : self.macro.attr('data-displayReadEvents');
    self.wikis = wikis != undefined ? wikis : self.macro.attr('data-wikis');
    self.spaces = spaces != undefined ? spaces : self.macro.attr('data-spaces');
    self.pages = pages != undefined ? pages : self.macro.attr('data-pages');
    self.users = users != undefined ? users : self.macro.attr('data-users');

    /**
     * Function that load notifications.
     *
     * The parameter `untilDate` is used as an "offset" to get events in a paginate mode.
     * We cannot rely on an integer offset because new events could have been stored recently and we want to display
     * older ones only.
     */
    self.load = function(untilDate) {
      var params = {
        'userId':              self.userId,
        'useUserPreferences':  self.useUserPreferences,
        'count':               self.notificationsLimit,
        'displayOwnEvents':    self.displayOwnEvents,
        'displayMinorEvents':  self.displayMinorEvents,
        'displaySystemEvents': self.displaySystemEvents,
        'displayReadEvents':   self.displayReadEvents,
        'wikis':               self.wikis,
        'spaces':              self.spaces,
        'pages':               self.pages,
        'users':               self.users,
        'displayReadStatus':   self.displayReadStatus
      };
      if (untilDate) {
        params.untilDate = untilDate;
        params.blackList = self.blackList.join(',');
      }
      var promise = $.Deferred();
      var restURL = xm.restURL.substring(0, xm.restURL.indexOf('/rest/')) + '/rest/notifications?media=json';
      $.getJSON(restURL, params).done(function (data) {
        // Remove loading items
        self.macro.removeClass('loading');
        // Display the "nothing!" message if there is no notification
        if (data.notifications.length == 0 &amp;&amp; !untilDate) {
          self.displayNoNotification();
        }
        // Display each entry
        for (var i = 0; i &lt; data.notifications.length; ++i) {
          self.displayEntry(data.notifications[i]);
        }
        self.macro.find('.notifications-macro-load-more').remove();
        // If there is other notifications to load
        if (data.notifications.length == self.notificationsLimit) {
          var loadMore = $('&lt;div>').addClass('text-center').addClass('notifications-macro-load-more');
          var btn = $('&lt;button>');
          btn.text("$escapetool.javascript($services.localization.render('notifications.menu.more'))");
          btn.addClass('btn').addClass('btn-default').addClass('btn-block');
          loadMore.append(btn);
          self.macro.append(loadMore);
          btn.click(function(event) {
            loadMore.text('').addClass('loading').css('height', '50px');
            // We use the date of the last displayed event as an offset to display those that come next
            var lastCompositeEvent = data.notifications[data.notifications.length - 1];
            var lastEventDate = lastCompositeEvent.dates[lastCompositeEvent.dates.length - 1];
            self.load(lastEventDate);
          });
        }
        promise.resolve(data.notifications);
      });
      return promise;
    };

    /**
     * Display a notification entry
     */
    self.displayEntry = function (entry) {
      // Add the id of the entry to the blacklist
      for (var i = 0; i &lt; entry.ids.length; ++i) {
        self.blackList.push(entry.ids[i]);
      }
      // Create the container
      var notif = $('&lt;div>').addClass('notification-event');
      notif.attr('data-eventtype', entry.type);
      // Put the content
      notif.append(entry.html);
      // Create the "read" button
      var readButton = $('&lt;button>');
      if (!entry.read &amp;&amp; self.displayReadStatus) {
        notif.addClass('notification-event-unread');
        // Add the "mark as read" button
        notif.find('.notification-content').prepend(readButton);
      }
      if (entry.exception) {
        var exceptionBox = $('&lt;div>').addClass('box errormessage');
        exceptionBox.text(entry.exception);
        notif.append(exceptionBox);
      }
      // Store the data in the DOM element so that any javascript code can retrieve it
      notif.data('notif', entry);
      // Add the notification entry
      self.macro.append(notif);
      // Add the "mark as read" button if the notif is not already read
      if (!entry.read) {
        // Style the read button
        readButton.addClass('notification-event-read-button').addClass('btn btn-xs');
        // Insert the cross icon
        readButton.html('$services.icon.renderHTML("check")');
        // On click
        readButton.click(function() {
          var notif = $(this).parents('div.notification-event');
          notif.removeClass('notification-event-unread');
          var url = new XWiki.Document(XWiki.Model.resolve('XWiki.Notifications.Code.NotificationsDisplayerUIX',
            XWiki.EntityType.DOCUMENT)).getURL('get', 'outputSyntax=plain');
          $.post(url, {
            action: 'read',
            eventIds: notif.data('notif').ids.join(','),
            read: true
          });
          $(this).remove();
          self.macro.trigger('eventMarkedAsRead', notif);
        });
      }
      // Details
      var details = notif.find('.notification-event-details');
      details.hide();
      var arrow = notif.find('.notification-event-arrow');
      notif.find('.toggle-notification-event-details').click(function() {
        details.toggle();
        arrow.text(arrow.text() == '▸' ? '▾' : '▸');
      });
    };

    /**
     * Display a message saying there is no content
     */
    self.displayNoNotification = function () {
      self.macro.removeClass('loading').html($('&lt;p>').addClass('text-center noitems')
        .text("$escapetool.javascript($services.localization.render('notifications.menu.nothing'))"));
    };
  };
});
</code>
    </property>
    <property>
      <name>Macro class</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>0</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>4e1c9bc0-9e28-41ed-b8f5-bd27e9cb740a</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <defaultValue>long</defaultValue>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <contenttype>PureText</contenttype>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <contentType>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>contentType</name>
        <number>6</number>
        <prettyName>Content Type</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>CSS|LESS</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </contentType>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators>|, </separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage|onDemand|always</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#template('colorThemeInit.vm')
/***********************************************
 * Notification Container
 ***********************************************/
.notifications-macro {
  float: left;
  max-width: 500px;
  min-height: 50px;
  width: 100%;
}

/***********************************************
 * Notification Event
 ***********************************************/
.notification-event {
  border: 1px dashed $theme.borderColor;
  padding: 1em;
}

.notification-event-unread {
  background-color: $theme.panelBackgroundColor;
}

/***********************************************
 * Notification Icons
 ***********************************************/
.notification-icon {
  padding-right: 0;
  position: relative;
}

.notification-icon .img-thumbnail {
  background-color: $theme.pageContentBackgroundColor;
  font-size: 2em;
  height: 2em;
  text-align: center;
  width: 2em;
}

.notification-icon .img-thumbnail.small{
  font-size: 1em;
  height: 2em;
  left: 0.5em;
  padding: 0.1em;
  position: absolute;
  bottom: -0.8em;
  width: 2em;
}

/***********************************************
 * Notification Content
 ***********************************************/
.notification-content {
  padding: 0 2.6em 0 0.5em;
}

.notification-content blockquote {
  font-size: 1.0em;
  margin-bottom: 0.5em;
  padding: 0 0.8em;
}

.notification-event-user > img {
  height: 16px;
  width: 16px;
  /* Don't work for Internet Explorer nor Edge 15 */
  object-fit: cover;
  object-position: center;
}

/***********************************************
 * Notification Buttons
 ***********************************************/
.notification-event-read-button, .toggle-notification-event-details {
  background-color: $theme.pageContentBackgroundColor;
  border: 1px solid #ddd;
  position: absolute;
  right: 10px;
  width: 2em;
  z-index: 1;
}

.notification-event-read-button {
  top: -6px;
}

.toggle-notification-event-details {
  bottom: -6px;
}

/***********************************************
 * Notification Details
 ***********************************************/
.notification-event-details {
  font-size: 0.8em;
  margin: 1em 0 0 0;
}

.notification-event-details td {
  border: 0;
  overflow: hidden;
  padding: 2px;
  text-overflow: ellipsis;
  width: 33%;
}

.notification-event-details td.description {
  width: 45%;
}

/***********************************************
 * Notifications Footer
 ***********************************************/
.notifications-load-more {
  cursor: pointer;
  min-height: 2em;
}

.notifications-load-more:hover {
  background-color: $theme.highlightColor;
}

.notifications-load-more p {
  margin: 0;
  padding: 0.7em;
}</code>
    </property>
    <property>
      <contentType>CSS</contentType>
    </property>
    <property>
      <name>CSS</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>0</number>
    <className>XWiki.WikiMacroClass</className>
    <guid>74143203-3a6b-44fd-8267-05163e7ed1fa</guid>
    <class>
      <name>XWiki.WikiMacroClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <code>
        <disabled>0</disabled>
        <editor>Text</editor>
        <name>code</name>
        <number>9</number>
        <prettyName>Macro code</prettyName>
        <rows>20</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <contentDescription>
        <contenttype>PureText</contenttype>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>contentDescription</name>
        <number>8</number>
        <prettyName>Content description (Not applicable for "No content" type)</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </contentDescription>
      <contentType>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>contentType</name>
        <number>7</number>
        <prettyName>Macro content type</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator>|</separator>
        <separators>|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>Optional|Mandatory|No content</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </contentType>
      <defaultCategory>
        <disabled>0</disabled>
        <name>defaultCategory</name>
        <number>4</number>
        <prettyName>Default category</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultCategory>
      <description>
        <contenttype>PureText</contenttype>
        <disabled>0</disabled>
        <editor>PureText</editor>
        <name>description</name>
        <number>3</number>
        <prettyName>Macro description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <id>
        <disabled>0</disabled>
        <name>id</name>
        <number>1</number>
        <prettyName>Macro id</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </id>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>2</number>
        <prettyName>Macro name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <supportsInlineMode>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>supportsInlineMode</name>
        <number>5</number>
        <prettyName>Supports inline mode</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </supportsInlineMode>
      <visibility>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>visibility</name>
        <number>6</number>
        <prettyName>Macro visibility</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator>|</separator>
        <separators>|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>Current User|Current Wiki|Global</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </visibility>
    </class>
    <property>
      <code>{{velocity}}
#set ($displayMacro = true)
#if ($xcontext.action != 'view')
  {{info}}
    {{translation key="notifications.macro.whenNotView" /}}
  {{/info}}
  
  #set ($displayMacro = false)
#else 
  #set ($users = $xcontext.macro.params.users)
  #if ("$!xcontext.macro.params.displayWatchedUsersOnly" == 'true')
    #set ($watchedUsers = $services.notification.watch.watchedUsers)
    #if ($watchedUsers.isEmpty())
    
      {{warning}}
        {{translation key="notifications.macro.noWatchedUsers" /}}
      {{/warning}}
      
      #set ($displayMacro = false)
    #else
      #set ($users = $stringtool.join($services.notification.watch.watchedUsers, ','))
    #end
  #end
#end
#if ($displayMacro)
#set ($discard = $xwiki.jsx.use('XWiki.Notifications.Code.NotificationsMacro'))
#set ($discard = $xwiki.ssx.use('XWiki.Notifications.Code.NotificationsMacro'))
#set ($discard = $xwiki.ssx.use('XWiki.Notifications.Code.NotificationsDisplayerUIX'))
{{html clean="false"}}
&lt;div class="notifications-macro loading" 
  data-userId="$!escapetool.xml($services.model.serialize($xcontext.userReference, 'default'))"
  data-count="$!escapetool.xml($xcontext.macro.params.count)" 
  data-useUserPreferences="$!escapetool.xml($xcontext.macro.params.useUserPreferences)"
  data-displayOwnEvents="$!escapetool.xml($xcontext.macro.params.displayOwnEvents)"
  data-displayMinorEvents="$!escapetool.xml($xcontext.macro.params.displayMinorEvents)"
  data-displaySystemEvents="$!escapetool.xml($xcontext.macro.params.displaySystemEvents)"
  data-displayReadEvents="$!escapetool.xml($xcontext.macro.params.displayReadEvents)"
  data-wikis="$!escapetool.xml($xcontext.macro.params.wikis)"
  data-spaces="$!escapetool.xml($xcontext.macro.params.spaces)"
  data-pages="$!escapetool.xml($xcontext.macro.params.pages)"
  data-users="$!escapetool.xml($users)"
  data-displayReadStatus="$!escapetool.xml($xcontext.macro.params.displayReadStatus)"
>
&lt;/div>
{{/html}}
#end
{{/velocity}}</code>
    </property>
    <property>
      <contentDescription></contentDescription>
    </property>
    <property>
      <contentType>No content</contentType>
    </property>
    <property>
      <defaultCategory></defaultCategory>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <id>notifications</id>
    </property>
    <property>
      <name>Notifications</name>
    </property>
    <property>
      <supportsInlineMode>0</supportsInlineMode>
    </property>
    <property>
      <visibility>Current Wiki</visibility>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>0</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>05ae5000-9fb6-4950-91b1-0ca199dc6c2f</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>10</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>count</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>2</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>f978d0e3-e4e3-434a-aca2-931c037ed5ab</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>false</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>useUserPreferences</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>3</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>d7f3ec6d-47cc-4ac9-9dfa-79af7d7a130a</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>false</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>displayOwnEvents</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>4</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>be57dad1-cbbd-438c-83c7-a7c76df0f817</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>false</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>displayMinorEvents</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>5</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>a779f085-8472-4ae1-950c-3e6d74690a2b</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>false</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>displaySystemEvents</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>6</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>cf8576f4-e7da-481a-944e-087aa16125ac</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>true</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>displayReadEvents</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>7</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>9bb41e1e-1a94-46ea-baa5-a47e8d685155</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>true</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>displayReadStatus</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>8</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>9c9f159d-c46d-488b-adf7-13902d1f0bf7</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue></defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>wikis</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>9</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>b2b2ba6c-9c50-4678-bd78-8d90937c148d</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue></defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>spaces</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>10</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>b2fec19e-2ab6-4c80-9d65-e771f0649560</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue></defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>pages</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>11</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>64a5c9be-27c7-4ca8-b3f1-e944526a308b</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue></defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>users</name>
    </property>
  </object>
  <object>
    <name>XWiki.Notifications.Code.NotificationsMacro</name>
    <number>12</number>
    <className>XWiki.WikiMacroParameterClass</className>
    <guid>981511b5-e10d-4691-a81a-849b35ad191f</guid>
    <class>
      <name>XWiki.WikiMacroParameterClass</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <defaultValue>
        <disabled>0</disabled>
        <name>defaultValue</name>
        <number>4</number>
        <prettyName>Parameter default value</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </defaultValue>
      <description>
        <disabled>0</disabled>
        <name>description</name>
        <number>2</number>
        <prettyName>Parameter description</prettyName>
        <rows>5</rows>
        <size>40</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </description>
      <mandatory>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>mandatory</name>
        <number>3</number>
        <prettyName>Parameter mandatory</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </mandatory>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Parameter name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
    </class>
    <property>
      <defaultValue>false</defaultValue>
    </property>
    <property>
      <description></description>
    </property>
    <property>
      <mandatory>0</mandatory>
    </property>
    <property>
      <name>displayWatchedUsersOnly</name>
    </property>
  </object>
</xwikidoc>